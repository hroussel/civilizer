<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	>

<div class="each-fragment-container">
	<h:panelGrid styleClass="each-fragment" bgcolor="#eee" columns="1" border="1">
		<f:facet name="header">
			<div class="fragment-header">
				<p:selectBooleanCheckbox value="#{fragmentBean.checked}" itemLabel="&nbsp;#{fragmentBean.fragment.id}" />
				&nbsp;&nbsp;
				<p:commandLink value="#{fragmentBean.fragment.title} " action="inspect-fragment">
					<f:param name="fragmentLoopIndex" value="${loop.index}" />
				</p:commandLink>
				&nbsp;&nbsp;
				<h:outputText value="[ #{fragmentBean.tagNames} ]" />
				&nbsp;&nbsp;
				<h:outputText style="font-weight:lighter;" value="#{fragmentBean.fragment.updateDatetime}">
					<f:converter converterId="jodaDateTimeConverter" />
				</h:outputText>
				<span class="fragment-menu">
					<a href="#editor-frame" class='edit-fragment-editor-trigger' title="Edit Fragment"
						onclick="openFragmentEditorForEdit('#{fragmentBean.fragment.id}', '#{fragmentBean.tagNames}')">
							<img id="edit-fragment-button" src="resources/styles/custom/images/edit.png" />
					</a>
					<c:choose>
						<c:when test="#{fragmentListBean.displayingTrash}">
							<p:commandLink action="delete-fragment">
								<f:param name="fragmentId" value="#{fragmentBean.fragment.id}" />
								<img id="delete-fragment-button" src="resources/styles/custom/images/trash.png" />
							</p:commandLink>
						</c:when>
						<c:otherwise>
							<p:commandLink action="trash-fragment">
								<f:param name="fragmentId" value="#{fragmentBean.fragment.id}" />
								<img id="delete-fragment-button" src="resources/styles/custom/images/trash.png" />
							</p:commandLink>
						</c:otherwise>
					</c:choose>
					<h:inputHidden id="fragment-title-placeholder-#{fragmentBean.fragment.id}" value="#{fragmentBean.fragment.title}" />
					<h:inputHidden id="fragment-content-placeholder-#{fragmentBean.fragment.id}" value="#{fragmentBean.fragment.content}" />
				</span>
			</div>
		</f:facet>
		<h:outputText value="#{fragmentBean.fragment.content}" styleClass="fragment-content" />
	</h:panelGrid>
</div>

</ui:composition>